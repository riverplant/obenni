<!DOCTYPE html>
<html lang="en">
    <head>        
        <!-- META SECTION -->
        <title>通信团联合值班系统</title>            
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        
        <link rel="icon" href="favicon.ico" type="image/x-icon" />
        
        <link rel="stylesheet" type="text/css" id="theme" href="css/theme-default.css"/>
        <style>
        .fixed-table-body{
        padding-top: 10px;
        }
        /***表格内的文字居中 start**/
                thead>tr>th{
text-align:center;

}
tbody>tr>td{
text-align:center;
}
.stepContainer{
     height: 100% ! important;
}
 
   /***表格内的文字居中 end**/
        </style>
    </head>
      <body onload="onload1()">
        <!-- START PAGE CONTAINER -->
        <div class="page-container">
            
            <!-- START PAGE SIDEBAR -->
            <div class="page-sidebar">
                <!-- START X-NAVIGATION -->
                <ul class="x-navigation">
                                        <li style="background:#e34724;">
<!--                         <a href="javascript:void(0);">通信团联合值班管理系统 -->
<!--                         </a> -->
                        <a href="#"><span style="font-size:20px;">通信团联合值班系统</span></a>
                    </li>
                    <li>
                        <a href="onduty.html"><span class="fa fa-files-o"></span><span class="xn-text">值班任务管理</span></a>                        
                    </li>  
                       <li>
                        <a href="txl.html"><span class="fa fa-files-o"></span> <span class="xn-text">通讯录管理</span></a>
                    </li>                  
                    <li  class="active">
                        <a href="wp.html"><span class="fa fa-files-o"></span> <span class="xn-text">工作计划管理</span></a>
                    </li>
                    <li class="xn-openable">
                        <a href="javascript:void(0);"><span class="fa fa-files-o"></span><span class="xn-text">车辆运行管理</span></a>                        
                        <ul>
                          <li><a href="bdc.html"><span class="fa fa-files-o"></span> 车辆管理</a>
	                                   
                            </li>                            
                            <li  style="display:none;"><a href="sj.html"><span class="fa fa-files-o"></span> 司机管理</a></li>
                            <li><a href="pcgl.html"><span class="fa fa-files-o"></span>派车管理</a></li>                            
                        </ul>
                    </li>                    
                    <li>
                        <a href="ipinfo.html"><span class="fa fa-files-o"></span><span class="xn-text">重要通知管理</span></a>
                    </li>
                    <li class="xn-openable">
                        <a href="javascript:void(0);"><span class="fa fa-files-o"></span><span class="xn-text">基础数据管理</span></a>
                         <ul>                            
                            <li><a href="jcsj.html"><span class="fa fa-files-o"></span> 人员管理</a></li>
                            <li><a href="jcsjbm.html"><span class="fa fa-files-o"></span>通讯录部门管理</a></li>
                            <li><a href="jcsjkbm.html"><span class="fa fa-files-o"></span>行政干部值班点管理</a></li>
                            <li><a href="jcsjkgbm.html"><span class="fa fa-files-o"></span>技术干部(骨干)值班点管理</a></li>
                        </ul>
                    </li>
<!--                     <li> -->
<!--                         <a href="zd.html"><span class="fa fa-files-o"></span> <span class="xn-text">字典管理</span></a> -->
<!--                     </li>                     -->
<!--                         <a href="logs.html"><span class="fa fa-files-o"></span><span class="xn-text">日志管理</span></a> -->
                <li class="xn-openable">
                        <a href="javascript:void(0);"><span class="fa fa-files-o"></span><span class="xn-text">日志管理</span></a>
                        <ul>                            
                            <li><a href="jblog.html"><span class="fa fa-files-o"></span> 警报日志管理</a></li>
                            <li><a href="zbylog.html"><span class="fa fa-files-o"></span>值班员行为日志</a></li>
                        </ul>
                    </li>
                                                           
                </ul>
            </div>
            <!-- END PAGE SIDEBAR -->
            
            <!-- PAGE CONTENT -->
            <div class="page-content">
                
                <!-- START X-NAVIGATION VERTICAL -->
                <ul class="x-navigation x-navigation-horizontal x-navigation-panel">
                    <!-- TOGGLE NAVIGATION -->
                    <li class="xn-icon-button">
                        <a href="#" class="x-navigation-minimize"><span class="fa fa-dedent"></span></a>
                    </li>
                    <!-- END TOGGLE NAVIGATION -->    
                        <li class="xn-search">
                        <form role="form">
                            <input type="text" name="search" placeholder="Search..."/>
                        </form>
                    </li>   
                    <!-- END SEARCH -->
                    <!-- SIGN OUT -->
                    <li class="xn-icon-button pull-right">
                        <a href="#" class="mb-control" data-box="#mb-signout"><span class="fa fa-sign-out"></span></a>                        
                    </li>                 
                </ul>
                <!-- END X-NAVIGATION VERTICAL -->                     
                
                <!-- START BREADCRUMB -->
                <ul class="breadcrumb">
                    <li><a href="#">首页</a></li>                    
<!--                     <li class="active">Active</li> -->
                </ul>
                <!-- END BREADCRUMB -->                
                
                <div class="page-title">                    
                    <h2><span class="fa fa-arrow-circle-o-left"></span>工作计划管理</h2>
                </div>                   
                
                <!-- PAGE CONTENT WRAPPER -->
                <div class="page-content-wrap">
                
                    <div class="row">
                        <div class="col-md-12">
 
                            <div class="panel panel-default tabs">
                                <ul class="nav nav-tabs nav-justified">
                                    <li class="active"><a href="#tab8" data-toggle="tab">工作计划管理</a></li>
                                    <li  style="display:none;"><a href="#tab9" data-toggle="tab">工作计划文档管理</a></li>
                                    <li style="display:none;"><a href="#tab10" data-toggle="tab">Third</a></li>
                                </ul>
                                <div class="panel-body tab-content">
                                    <div class="tab-pane active" id="tab8">
                                    
                                    
                                    <div class="page-content-wrap">
                
                    
                    
                    <div class="row">
                        <div class="col-md-12">
                            
                            <!-- START DATATABLE EXPORT -->
                            <div class="panel panel-default">
                            
                                <div class="panel-body">
<!--                                     <table id="customers2" class="table datatable"> -->
    <div class="btn-group" id="toolbar">
                                       <ul class="list-tags" >   
                                                       <li  id="crop-avatar"><button class="btn btn-success btn-sm avatar-view" id="addmodal"><span class="fa fa-plus"></span>增加 </button></li>
                                                                           <li>&nbsp;&nbsp;</li>    
                                                                      
                                                                                                                                            <li>  <button class="plan_edit btn btn-info btn-sm" id="editmodal" onclick="functionedit()"><span class="fa fa-cogs"></span> 编辑</button></li>      
                                                                        <li>&nbsp;&nbsp;</li>   
<!--                                                                                                                                                         <li> <button class="btn btn-primary btn-sm" id="ylmodal" ><span class="fa fa-eye"></span> 预览</button></li>    -->
<!--                                                                          <li>&nbsp;&nbsp;</li>                  -->
                                                  <li>  <button class="plan_delete btn btn-danger btn-sm" id="deletemodal"><span class="fa fa-times"></span> 移除</button>  </li>    
                                           </ul>  
      </div> 
                                    <table id="customers2" class="table" style="margin-top:10px;">
 
                                        
                                    </table>                                    
                                    
                                </div>
                            </div>

                        </div>
                    </div>

                </div>  
                                                                       
                                    </div>
                               
                                                     
                                </div>
                            </div>                                         
                            <!-- END JUSTIFIED TABS -->

                        </div>
                    </div>
                
                </div>
                <!-- END PAGE CONTENT WRAPPER -->                
            </div>            
            <!-- END PAGE CONTENT -->
        </div>
        <!-- END PAGE CONTAINER -->
<!-- 弹出层    start -->
              <div class="modal fade" id="example" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog" style="width:1100px;">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
×
</button>
<h4 class="modal-title" id="myModalLabel">
添加工作计划
</h4>
</div>
<div class="modal-body" style="overflow:auto;width:1100px;">
 <iframe src="wp1.html"></iframe>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">关闭
</button>
<button type="button" class="btn btn-primary" onclick="okfunction()">
提交更改
</button>
</div>
</div>
</div>
</div>
        <!-- MESSAGE BOX-->
        <div class="message-box animated fadeIn" data-sound="alert" id="mb-signout">
            <div class="mb-container">
                <div class="mb-middle">
                    <div class="mb-title"><span class="fa fa-sign-out"></span> 退<strong>出</strong> ?</div>
                    <div class="mb-content">
                        <p>确定退出?</p>                    
                    </div>
                    <div class="mb-footer">
                        <div class="pull-right">
                            <a href="pages-login.html" class="btn btn-success btn-lg">确定</a>
                            <button class="btn btn-default btn-lg mb-control-close">取消</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                  <audio id="audio-alert" src="audio/alert.mp3" preload="auto"></audio>
        <audio id="audio-fail" src="audio/fail.mp3" preload="auto"></audio>
        <!-- END PRELOADS -->                      

    <!-- START SCRIPTS -->
        <!-- START PLUGINS -->
        <script type="text/javascript" src="js/plugins/jquery/jquery.min.js"></script>
        <script type="text/javascript" src="js/plugins/jquery/jquery-ui.min.js"></script>
        <script type="text/javascript" src="js/plugins/bootstrap/bootstrap.min.js"></script>        
        <!-- END PLUGINS -->
        
        <!-- START THIS PAGE PLUGINS-->        
        <script type='text/javascript' src='js/plugins/icheck/icheck.min.js'></script>
         <script src="js/bootstrap-table.min.js"></script>
<!--     <script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.0/locale/bootstrap-table-zh-CN.min.js"></script> -->
         <script src="js/bootstrap-table-zh-CN.min.js"></script>

<!--         <script type="text/javascript" src="js/settings.js"></script> -->
        
        <script type="text/javascript" src="js/plugins.js"></script>        
        <script type="text/javascript" src="js/actions.js"></script>  
                <script type="text/javascript" src="js/bootstrapExport1.js"></script> 
                 <script type="text/javascript" src="js/bootstrapExport2.js"></script>   
                  
        <script type="text/javascript" src="js/plugins/smartwizard/jquery.smartWizard-2.0.min.js"></script>        
        
        <!-- 验证 -->
         <script type='text/javascript' src='js/plugins/bootstrap/bootstrap-datepicker.js'></script>        
        <script type='text/javascript' src='js/plugins/bootstrap/bootstrap-select.js'></script>        

        <script type='text/javascript' src='js/plugins/validationengine/languages/jquery.validationEngine-en.js'></script>
        <script type='text/javascript' src='js/plugins/validationengine/jquery.validationEngine.js'></script>        

        <script type='text/javascript' src='js/plugins/jquery-validation/jquery.validate.js'></script>                

        <script type='text/javascript' src='js/plugins/maskedinput/jquery.maskedinput.min.js'></script>
<!--   bootstrapExport1.js -->
            <script type="text/javascript" src="js/plugins/mcustomscrollbar/jquery.mCustomScrollbar.min.js"></script>
      <script type="text/javascript" src="js/fgd.js"></script>
                      <script type="text/javascript" src="js/common.js"></script>
<!--                       object-cookie.js -->
                            <script type="text/javascript" src="js/object-cookie.js"></script>
      
        <script>
        var jvalidate = $("#jvalidate").validate({
            ignore: [],
            rules: {                                            
                    login: {
                            required: true,
                            minlength: 2,
                            maxlength: 8
                    },
                    password: {
                            required: true,
                            minlength: 5,
                            maxlength: 10
                    },
                    're-password': {
                            required: true,
                            minlength: 5,
                            maxlength: 10,
                            equalTo: "#password2"
                    },
                    age: {
                            required: true,
                            min: 18,
                            max: 100
                    },
                    email: {
                            required: true,
                            email: true
                    },
                    date: {
                            required: true,
                            date: true
                    },
                    credit: {
                            required: true,
                            creditcard: true
                    },
                    site: {
                            required: true,
                            url: true
                    }
                }                                        
            });
        var row_selected="";
        var $table=$('#customers2');
//         function functionyl(){
//         	  cookie.delete1("row_selected");
//         	 cookie.set("row_selected",row_selected,24);//设置为24天过期
//         	 console.log(row_selected);
//         }
        function functionedit(){
        	var ids=$.map($table.bootstrapTable('getSelections'), function (row) {
                return row.id;
    			        });
        	if(ids.length>1){
        		alert("只能选择一行进行编辑");
        		window.location.reload(true);
        	}else{
     		     cookie.delete1("row_selected");
            	 cookie.set("row_selected",row_selected,24);//设置为24天过期
            	 console.log(row_selected);
            	 window.location.href="wp1.html";
        	}
        	
        }
  function functioncreate(){
	
  }
 	 
        $(function(){
   
   /*********************************/
   
        	   $('#customers2').bootstrapTable({
        		   url:commurl+"/conventionSystem/tplan/querytplanByFenye.do",
        	        dataField: "rows",//服务端返回数据键值 就是说记录放的键值是rows，分页时使用总记录数的键值为total
       	        search: true,//是否搜索
        	striped:true,
        	showRefresh: true, 
        	        pagination: true,//是否分页
        	        pageSize: 5,//单页记录数
        	        pageList: [15, 30, 50],//分页步进值
        	         sidePagination: "server",//服务端分页
        	     contentType: "application/x-www-form-urlencoded",//请求数据内容格式 默认是 application/json 自己根据格式自行服务端处理
        	        dataType: "json",//期待返回数据类型
        	       method: "post",//请求方式
        	       searchAlign: "right",//查询框对齐方式
        	        queryParamsType: "limit",//查询参数组织方式
        	        showToggle:true,
        	        showPaginationSwitch:true,
        	        showExport: true,                     //是否显示导出
                    exportDataType: "basic",              //basic', 'all', 'selected'.
                    buttonsAlign:"right",
        	        queryParams:function queryParams(params) {
        	        	return {
        	        	rows: params.limit,
        	        	page: this.pageNumber
        	        	      };
        	        	},
        	       searchOnEnterKey: true,//回车搜索
        	        buttonsAlign: "right",//按钮对齐方式
        	        clickToSelect:true,
        	        toolbar: "#toolbar",//指定工具栏
        	        toolbarAlign: "left",//工具栏对齐方式
        	        align:"center",
        	        columns: [
        	                  {
        	                      title: "编号",//标题
        	                      checkbox:true
        	                  }  ,
        	            {
        	                field: "id",
        	                title: "序号",
        	                titleTooltip: "this is name"
        	            },
        	            {
        	                field: "planData",
        	                title: "工作计划日期"
//         	                ,
//         	                formatter:function(v1,v2,v3){
//         	                	return 
//         	                }
        	            }
        	        
        	            
        	            ,{
        	            	title:"操作",  
        	            	formatter:function(value,index){
//                   			  var btn1='<button class="btn btn-primary btn-sm" id="ylmodal"><span class="fa fa-eye"></span> 预览</button>';
                			  var btnt='&nbsp;<button class="file_download btn btn-info btn-sm" tag="402880e959308ac1015930a55f190000"><span class="fa fa-cloud-download"></span> 下载计划文档</button>';
                			var btn2='&nbsp;<button class="generate btn btn-warning btn-sm" id="createmodal" onclick="functioncreate()"><span class="fa fa-book"></span>生成计划表</button>';
                			  var btn=btn2+btnt;
                			  return btn;
                			  
                		  }
        	            }
        	        ],       
        	        onClickRow: function(row, $element) {
        	        	row_selected=row.content;
        	        	console.log(row_selected);
        	        	
        	        },//单击row事件
        	        locale:"zh-CN",//中文支持,
        	        detailView: false, //是否显示详情折叠
        	        detailFormatter: function(index, row, element) {
        	            var html = '';
        	            $.each(row, function(key, val){
        	                html += "<p>" + key + ":" + val +  "</p>";
        	            });
        	            return html;
        	        }
        	    });
        	/******************************************值班表的表格***********************************************/
        	$("#addmodal").click(function(){
                      window.location.href="wp1.html";        		
        		
        	});
        	$("#deletemodal").click(function(){
		        		var ids=$.map($table.bootstrapTable('getSelections'), function (row) {
		                    return row.id;
		        			        });
		        			  var data=[];
		        			  for(var i=0;i<ids.length;i++){
		        				   data.push(ids[i]);
		        			  }
		        			  console.log(data);
		        			  $.ajax({
		        			    url:commurl+'/conventionSystem/tplan/deltplan.do?uid=admin&ids='+data,
		        			    cache: false,
		        			    success: function(msg) {
		        			    	  cookie.delete1("row_selected");
		        			    	window.location.reload(true);
		        			    },
		        			    error: function(data) {
		        			    	console.log(data);
		        			    }
		                           });
        		
        	});
        	
        	
 
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        	
        })
        </script>
    </body>
</html>






